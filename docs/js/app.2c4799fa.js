(function(e){function t(t){for(var r,i,a=t[0],u=t[1],l=t[2],c=0,d=[];c<a.length;c++)i=a[c],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(d.length)d.shift()();return n.push.apply(n,l||[]),o()}function o(){for(var e,t=0;t<n.length;t++){for(var o=n[t],r=!0,i=1;i<o.length;i++){var u=o[i];0!==s[u]&&(r=!1)}r&&(n.splice(t--,1),e=a(a.s=o[0]))}return e}var r={},s={2:0},n=[];function i(e){return a.p+"js/"+({}[e]||e)+"."+{1:"a3995f12",3:"38042a60",4:"f0b9cc6c",5:"2e59d4b1"}[e]+".js"}function a(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.e=function(e){var t=[],o=s[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,r){o=s[e]=[t,r]}));t.push(o[2]=r);var n,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=i(e);var l=new Error;n=function(t){u.onerror=u.onload=null,clearTimeout(c);var o=s[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",l.name="ChunkLoadError",l.type=r,l.request=n,o[1](l)}s[e]=void 0}};var c=setTimeout((function(){n({type:"timeout",target:u})}),12e4);u.onerror=u.onload=n,document.head.appendChild(u)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/bitbucket-pr-dashboard/",a.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var p=l;n.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"0047":function(e,t,o){},"2f39":function(e,t,o){"use strict";o.r(t);o("e6cf"),o("5319"),o("7d6e"),o("e54f"),o("985d"),o("0047");var r=o("2b0e"),s=o("1f91"),n=o("42d2"),i=o("b05d"),a=o("2a19");r["a"].use(i["a"],{config:{},lang:s["a"],iconSet:n["a"],plugins:{Notify:a["a"]}});var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view")],1)},l=[],c=o("60a3"),p=function(e,t,o,r){var s,n=arguments.length,i=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(n<3?s(i):n>3?s(t,o,i):s(t,o))||i);return n>3&&i&&Object.defineProperty(t,o,i),i};let d=class extends c["b"]{};d=p([c["a"]],d);var f=d,b=f,h=o("2877"),v=Object(h["a"])(b,u,l,!1,null,null,null),y=v.exports,m=o("4bde"),g=o("2f62");const w="bitbucket.credential",R="bitbucket.selected_repositories",k={credential:{username:"",password:""},isLogin:!1,workspaces:null,repositories:null,pullRequests:{},selectedRepositories:{}};var q=k,P=o("bc3a"),O=o.n(P);const S=O.a.create({baseURL:"https://api.bitbucket.org/2.0/"}),j=(e,t)=>{S.defaults.auth={username:e,password:t}};var x=Object(m["boot"])((({Vue:e})=>{e.prototype.$axios=S})),L=function(e,t,o,r){function s(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,n){function i(e){try{u(r.next(e))}catch(t){n(t)}}function a(e){try{u(r["throw"](e))}catch(t){n(t)}}function u(e){e.done?o(e.value):s(e.value).then(i,a)}u((r=r.apply(e,t||[])).next())}))};const $={loadWorkspaces(e){return L(this,void 0,void 0,(function*(){const{data:t}=yield S.get("workspaces");e.commit("workspaces",t)}))},loadRepositories(e,t){return L(this,void 0,void 0,(function*(){const{data:o}=yield S.get(`repositories/${t.slug}?role=member&pagelen=50`);e.commit("repositories",o)}))},approve(e,{workspace:t,repository:o,pullRequest:r}){return L(this,void 0,void 0,(function*(){return yield S.post(`repositories/${t.slug}/${o}/pullrequests/${r.id}/approve`)}))},unapprove(e,{workspace:t,repository:o,pullRequest:r}){return L(this,void 0,void 0,(function*(){return yield S.delete(`repositories/${t.slug}/${o}/pullrequests/${r.id}/approve`)}))},updateBuildStatus(e,{repository:t,pullRequest:o}){return L(this,void 0,void 0,(function*(){const{data:r}=yield S.get(`${o.links.statuses.href}?pagelen=50`);e.commit("buildStatuses",{repository:t,pullRequest:o,statusList:r})}))},updateBuildStatuses(e,{repository:t}){if(e.state.pullRequests[t])for(const o in e.state.pullRequests[t])e.dispatch("updateBuildStatus",{repository:t,pullRequest:e.state.pullRequests[t][o]})},loadPullRequests(e,{workspace:t,repository:o}){return L(this,void 0,void 0,(function*(){const{data:r}=yield S.get(`repositories/${t.slug}/${o}/pullrequests?state=OPEN&fields=%2Bvalues.participants&pagelen=50`),s={};for(const e of r.values)s[e.id]=e;e.commit("pullRequests",{repository:o,pullRequestList:s})}))},updateRepositoryPullRequests(e,{workspace:t,repository:o}){return L(this,void 0,void 0,(function*(){yield e.dispatch("loadPullRequests",{workspace:t,repository:o}),yield e.dispatch("updateBuildStatuses",{repository:o})}))},setPullRequestTitle(e,{title:t,pullRequest:o}){return L(this,void 0,void 0,(function*(){yield S.put(o.links.self.href,{title:t})}))},updateShowRepositories(e,{workspace:t,oldRepositories:o,newRepositories:r}){return L(this,void 0,void 0,(function*(){r=r||[],o=o||[];const s=r.filter((e=>!o.includes(e)));e.commit("selectWorkspaceRepositories",{workspace:t.slug,repositories:r});for(const o of s)yield e.dispatch("loadPullRequests",{workspace:t,repository:o});for(const t of s)yield e.dispatch("updateBuildStatuses",{repository:t})}))}};var _=$;const B={};var E=B;const J={login(e,t){e.credential=t,localStorage.setItem(w,JSON.stringify(t)),j(t.username,t.password),e.isLogin=!0},logout(e){e.isLogin=!1,localStorage.removeItem(w)},workspaces(e,t){e.workspaces=Object.freeze(t)},repositories(e,t){e.repositories=Object.freeze(t)},selectedRepositories(e,t){e.selectedRepositories=t},selectWorkspaceRepositories(e,t){e.selectedRepositories[t.workspace]=t.repositories,localStorage.setItem(R,JSON.stringify(e.selectedRepositories))},pullRequests(e,{repository:t,pullRequestList:o}){r["a"].set(e.pullRequests,t,o)},buildStatuses(e,{repository:t,pullRequest:o,statusList:s}){r["a"].set(e.pullRequests[t][o.id],"statuses",s)}};var N=J;const V={namespaced:!0,actions:_,getters:E,mutations:N,state:q};var I=V;const T={title:""};var M=T;const A={};var C=A;const W={};var z=W;const D={title(e,t){e.title=t}};var Q=D;const U={namespaced:!0,actions:C,getters:z,mutations:Q,state:M};var F=U,G=Object(m["store"])((function({Vue:e}){e.use(g["a"]);const t=new g["a"].Store({modules:{bitbucket:I,app:F},strict:!1}),o=localStorage.getItem(w);o&&t.commit("bitbucket/login",JSON.parse(o));const r=localStorage.getItem(R);return r&&t.commit("bitbucket/selectedRepositories",JSON.parse(r)),t})),H=o("8c4f");const K=[{path:"/",component:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"013f"))}]},{path:"/dashboard",component:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"713b")),children:[{path:":workspace?",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"ec95"))}]},{path:"*",component:()=>Promise.all([o.e(0),o.e(5)]).then(o.bind(null,"e51e"))}];var X=K,Y=Object(m["route"])((function({Vue:e,store:t}){e.use(H["a"]);const o=new H["a"]({scrollBehavior:()=>({x:0,y:0}),routes:X,mode:"hash",base:"/bitbucket-pr-dashboard/"});return o.beforeEach(((e,o,r)=>{t.state.bitbucket.isLogin&&"/"===e.fullPath?r("/dashboard"):t.state.bitbucket.isLogin||"/"===e.fullPath?r():r("/")})),o})),Z=async function(){const e="function"===typeof G?await G({Vue:r["a"]}):G,t="function"===typeof Y?await Y({Vue:r["a"],store:e}):Y;e.$router=t;const o={router:t,store:e,render:e=>e(y),el:"#q-app"};return{app:o,store:e,router:t}},ee={failed:"Action failed",success:"Action was successful"},te={"en-us":ee},oe=o("a925");r["a"].use(oe["a"]);const re=new oe["a"]({locale:"en-us",fallbackLocale:"en-us",messages:te});var se=Object(m["boot"])((({app:e})=>{e.i18n=re}));const ne="/bitbucket-pr-dashboard/",ie=/\/\//,ae=e=>(ne+e).replace(ie,"/");async function ue(){const{app:e,store:t,router:o}=await Z();let s=!1;const n=e=>{s=!0;const t=Object(e)===e?ae(o.resolve(e).route.fullPath):e;window.location.href=t},i=window.location.href.replace(window.location.origin,""),a=[se,x];for(let l=0;!1===s&&l<a.length;l++)if("function"===typeof a[l])try{await a[l]({app:e,router:o,store:t,Vue:r["a"],ssrContext:null,redirect:n,urlPath:i,publicPath:ne})}catch(u){return u&&u.url?void(window.location.href=u.url):void console.error("[Quasar] boot error:",u)}!0!==s&&new r["a"](e)}ue()}});