(function(e){function t(t){for(var r,i,a=t[0],u=t[1],l=t[2],c=0,d=[];c<a.length;c++)i=a[c],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,i=1;i<o.length;i++){var u=o[i];0!==n[u]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=o[0]))}return e}var r={},n={2:0},s=[];function i(e){return a.p+"js/"+({}[e]||e)+"."+{1:"a3995f12",3:"05fb44c7",4:"036e6bd2",5:"2e59d4b1"}[e]+".js"}function a(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,r){o=n[e]=[t,r]}));t.push(o[2]=r);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=i(e);var l=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(c);var o=n[e];if(0!==o){if(o){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",l.name="ChunkLoadError",l.type=r,l.request=s,o[1](l)}n[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/bitbucket-pr-dashboard/",a.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var p=l;s.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"0047":function(e,t,o){},"2f39":function(e,t,o){"use strict";o.r(t);o("e6cf"),o("5319"),o("7d6e"),o("e54f"),o("985d"),o("0047");var r=o("2b0e"),n=o("1f91"),s=o("42d2"),i=o("b05d"),a=o("2a19");r["a"].use(i["a"],{config:{},lang:n["a"],iconSet:s["a"],plugins:{Notify:a["a"]}});var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view")],1)},l=[],c=o("60a3"),p=function(e,t,o,r){var n,s=arguments.length,i=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)i=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(i=(s<3?n(i):s>3?n(t,o,i):n(t,o))||i);return s>3&&i&&Object.defineProperty(t,o,i),i};let d=class extends c["b"]{};d=p([c["a"]],d);var f=d,b=f,h=o("2877"),v=Object(h["a"])(b,u,l,!1,null,null,null),y=v.exports,m=o("4bde"),g=o("2f62");const w="bitbucket.credential",R={credential:{username:"",password:""},isLogin:!1,workspaces:null,repositories:null,pullRequests:{}};var k=R,P=o("bc3a"),O=o.n(P);const q=O.a.create({baseURL:"https://api.bitbucket.org/2.0/"}),j=(e,t)=>{q.defaults.auth={username:e,password:t}};var S=Object(m["boot"])((({Vue:e})=>{e.prototype.$axios=q})),x=function(e,t,o,r){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,s){function i(e){try{u(r.next(e))}catch(t){s(t)}}function a(e){try{u(r["throw"](e))}catch(t){s(t)}}function u(e){e.done?o(e.value):n(e.value).then(i,a)}u((r=r.apply(e,t||[])).next())}))};const L={loadWorkspaces(e){return x(this,void 0,void 0,(function*(){const{data:t}=yield q.get("workspaces");e.commit("workspaces",t)}))},loadRepositories(e,t){return x(this,void 0,void 0,(function*(){const{data:o}=yield q.get(`repositories/${t.slug}?role=member&pagelen=50`);e.commit("repositories",o)}))},updateBuildStatus(e,{repository:t,pullRequest:o}){return x(this,void 0,void 0,(function*(){const{data:r}=yield q.get(`${o.links.statuses.href}?pagelen=50`);e.commit("buildStatuses",{repository:t,pullRequest:o,statusList:r})}))},updateBuildStatuses(e,{repository:t}){if(e.state.pullRequests[t])for(const o in e.state.pullRequests[t])e.dispatch("updateBuildStatus",{repository:t,pullRequest:e.state.pullRequests[t][o]})},loadPullRequests(e,{workspace:t,repository:o}){return x(this,void 0,void 0,(function*(){const{data:r}=yield q.get(`repositories/${t.slug}/${o}/pullrequests?state=OPEN&pagelen=50`),n={};for(const e of r.values)n[e.id]=e;e.commit("pullRequests",{repository:o,pullRequestList:n})}))},updateRepositoryPullRequests(e,{workspace:t,repository:o}){return x(this,void 0,void 0,(function*(){yield e.dispatch("loadPullRequests",{workspace:t,repository:o}),yield e.dispatch("updateBuildStatuses",{repository:o})}))},setPullRequestTitle(e,{title:t,pullRequest:o}){return x(this,void 0,void 0,(function*(){yield q.put(o.links.self.href,{title:t})}))},updateShowRepositories(e,{workspace:t,oldRepositories:o,newRepositories:r}){return x(this,void 0,void 0,(function*(){r=r||[],o=o||[];const n=r.filter((e=>!o.includes(e)));for(const o of n)console.log("load",o),yield e.dispatch("loadPullRequests",{workspace:t,repository:o});for(const t of n)yield e.dispatch("updateBuildStatuses",{repository:t})}))}};var _=L;const $={};var B=$;const E={login(e,t){e.credential=t,localStorage.setItem(w,JSON.stringify(t)),j(t.username,t.password),e.isLogin=!0},logout(e){e.isLogin=!1,localStorage.removeItem(w)},workspaces(e,t){e.workspaces=Object.freeze(t)},repositories(e,t){e.repositories=Object.freeze(t)},pullRequests(e,{repository:t,pullRequestList:o}){r["a"].set(e.pullRequests,t,o)},buildStatuses(e,{repository:t,pullRequest:o,statusList:n}){r["a"].set(e.pullRequests[t][o.id],"statuses",n)}};var V=E;const T={namespaced:!0,actions:_,getters:B,mutations:V,state:k};var J=T;const M={title:""};var N=M;const A={};var C=A;const I={};var z=I;const D={title(e,t){e.title=t}};var Q=D;const U={namespaced:!0,actions:C,getters:z,mutations:Q,state:N};var W=U,F=Object(m["store"])((function({Vue:e}){e.use(g["a"]);const t=new g["a"].Store({modules:{bitbucket:J,app:W},strict:!1}),o=localStorage.getItem(w);return o&&t.commit("bitbucket/login",JSON.parse(o)),t})),G=o("8c4f");const H=[{path:"/",component:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"013f"))}]},{path:"/dashboard",component:()=>Promise.all([o.e(0),o.e(1)]).then(o.bind(null,"713b")),children:[{path:":workspace?",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"ec95"))}]},{path:"*",component:()=>Promise.all([o.e(0),o.e(5)]).then(o.bind(null,"e51e"))}];var K=H,X=Object(m["route"])((function({Vue:e,store:t}){e.use(G["a"]);const o=new G["a"]({scrollBehavior:()=>({x:0,y:0}),routes:K,mode:"hash",base:"/bitbucket-pr-dashboard/"});return o.beforeEach(((e,o,r)=>{t.state.bitbucket.isLogin&&"/"===e.fullPath?r("/dashboard"):t.state.bitbucket.isLogin||"/"===e.fullPath?r():r("/")})),o})),Y=async function(){const e="function"===typeof F?await F({Vue:r["a"]}):F,t="function"===typeof X?await X({Vue:r["a"],store:e}):X;e.$router=t;const o={router:t,store:e,render:e=>e(y),el:"#q-app"};return{app:o,store:e,router:t}},Z={failed:"Action failed",success:"Action was successful"},ee={"en-us":Z},te=o("a925");r["a"].use(te["a"]);const oe=new te["a"]({locale:"en-us",fallbackLocale:"en-us",messages:ee});var re=Object(m["boot"])((({app:e})=>{e.i18n=oe}));const ne="/bitbucket-pr-dashboard/",se=/\/\//,ie=e=>(ne+e).replace(se,"/");async function ae(){const{app:e,store:t,router:o}=await Y();let n=!1;const s=e=>{n=!0;const t=Object(e)===e?ie(o.resolve(e).route.fullPath):e;window.location.href=t},i=window.location.href.replace(window.location.origin,""),a=[re,S];for(let l=0;!1===n&&l<a.length;l++)if("function"===typeof a[l])try{await a[l]({app:e,router:o,store:t,Vue:r["a"],ssrContext:null,redirect:s,urlPath:i,publicPath:ne})}catch(u){return u&&u.url?void(window.location.href=u.url):void console.error("[Quasar] boot error:",u)}!0!==n&&new r["a"](e)}ae()}});